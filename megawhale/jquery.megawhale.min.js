/*! jQuery MegaWhale v1.0.0 | Apache License, Version 2.0 | https://github.com/registerguard/jquery-megawhale */(function(e,n,t){"use strict";var o=n.console||{log:function(){},warn:function(){}},s="ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch,i={NS:"megawhale",PREFIX:"mw",TOUCH:s,TYPE:s?"touchstart":"click"},a={init:function(n){return this.each(function(){var t=e(this),s=t.data(i.NS),a=e.extend({},d.external,e.fn[i.NS].defaults,n);if(!s){var l=t.children("li").children("div"),c=l.parent("li"),p=c.children("a");t.data(i.NS,{divs:l,hrefs:p,init:!1,lis:c,options:a,outside:!1,target:t}),s=t.data(i.NS)}s.init?o.warn("jQuery."+i.NS,"thinks it's already initialized on",this):r.call(t,s)})},open:function(n){return n===undefined&&(n=this),n.each(function(){var n=e(this),t=n.parent().data(i.NS);if(!n.hasClass(t.options.openClass)){var o=n.children("div");n.addClass(t.options.openClass).siblings().removeClass(t.options.openClass).children("div").stop(!0).hide().css("visibility","hidden"),o.filter(":hidden").css("visibility","visible"),t.options.onBeforeShow.call(o),o.animate(t.options.animIn,t.options.speedIn,t.options.easeIn,function(){t.options.onShow.call(e(this))})}})},close:function(n){return n===undefined&&(n=this),n.each(function(){var n=e(this),t=n.parent().data(i.NS);if(n.hasClass(t.options.openClass)){var o=n.children("div");n.children("a").removeClass(d.internal.clickClass).blur(),t.options.onBeforeHide.call(o),o.animate(t.options.animOut,t.options.speedOut,t.options.easeOut,function(){var n=e(this);n.hide().css("visibility","hidden").parent().removeClass(t.options.openClass),t.options.onHide.call(n)})}})},destroy:function(){return this.each(function(){var n=e(this),t=n.data(i.NS);t&&(t.divs.removeAttr("style"),("click"===t.options.eventType||i.TOUCH)&&t.options.close&&t.divs.find("."+d.internal.closeClass).remove(),t.hrefs.off("."+i.NS),t.options.arrow&&t.hrefs.removeClass(d.internal.anchorClass).find("."+d.internal.arrowClass).remove(),t.hrefs.removeClass(d.internal.clickClass),t.lis.removeData(i.NS+".mousedown").off("."+i.NS),t.target.removeClass(d.internal.menuClass),n.removeData(i.NS))})}},r=function(t){t===undefined&&(t=this.data(i.NS)),t&&(t.init=!0,t.options.onInit.call(t.target),t.divs.length===t.hrefs.length?(t.target.addClass(d.internal.menuClass),t.divs.hide(),t.options.eventType=/^(?:click|hover|hoverIntent)$/.test(t.options.eventType)?t.options.eventType:"hover",t.options.arrow&&t.hrefs.addClass(d.internal.anchorClass).append(t.options.arrow),("click"===t.options.eventType||i.TOUCH)&&t.options.close&&e(t.options.close).appendTo(t.divs).on(i.TYPE+"."+i.NS,function(n){var t=e(this).parent("div").parent("li");a.close.call(t),n.preventDefault(),n.stopPropagation()}),t.hrefs.on("mousedown."+i.NS+" mouseup."+i.NS+" focus."+i.NS,function(n){var o=e(this),s=o.parent("li");switch(n.type){case"mousedown":s.data(i.NS+".mousedown",!0);break;case"mouseup":s.removeData(i.NS+".mousedown");break;case"focus":s.data(i.NS+".mousedown")||(i.TOUCH||"click"===t.options.eventType?o.click():(t.options.eventOutside&&l(t),a.open.call(s)))}n.preventDefault(),n.stopPropagation()}),i.TOUCH||"click"===t.options.eventType?t.hrefs.on(i.TYPE+"."+i.NS,function(o){var s=e(this),i=s.parent("li");if(s.hasClass(d.internal.clickClass)){t.options.eventOutside&&c(t),a.close.call(i);var r=p.call(s);r&&(n.location=r)}else t.options.eventOutside&&l(t),t.hrefs.removeClass(d.internal.clickClass),s.addClass(d.internal.clickClass),a.open.call(i);o.preventDefault(),o.stopPropagation()}):t.lis.on("mouseenter."+i.NS+" mouseleave."+i.NS,function(n){var o=e(this);switch(n.type){case"mouseenter":t.options.eventOutside&&c(t),e.fn[i.NS].hoverEnter.call(o);break;case"mouseleave":e.fn[i.NS].hoverLeave.call(o)}}),t.options.onAfterInit.call(t.target)):o.warn("jQuery."+i.NS,"thinks there's a problem with your markup"))},l=function(n){if(!n.outside){n.outside=!0,n.options.onStartOutside.call(n.target);var o=e(t);o.off("."+i.NS),o.on("focusin."+i.NS+" "+i.TYPE+"."+i.NS,function(t){return 0!==e(t.target).closest(n.target).length?!0:(c(n),a.close.call(n.lis),undefined)})}},c=function(n){n.outside&&(n.options.onEndOutside.call(n.target),n.outside=!1,e(t).off("."+i.NS))},p=function(){var e=this.attr("href");return e&&"#"!==e?e:!1};e.fn[i.NS]=function(n){return a[n]?a[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?(e.error("jQuery."+i.NS+" thinks that "+n+" doesn't exist"),undefined):a.init.apply(this,arguments)},e.fn[i.NS].hoverEnter=function(){return this.each(function(){var n=e(this),t=n.parent().data(i.NS);e.fn.doTimeout&&"hoverIntent"===t.options.eventType?n.doTimeout("hover",t.options.delayIn,function(){a.open.call(e(this))}):a.open.call(n)})},e.fn[i.NS].hoverLeave=function(){return this.each(function(){var n=e(this),t=n.parent().data(i.NS);e.fn.doTimeout&&"hoverIntent"===t.options.eventType?n.doTimeout("hover",t.options.delayOut,function(){a.close.call(e(this))}):a.close.call(n)})};var d={};d.internal={anchorClass:i.PREFIX+"-a-with-div",arrowClass:i.PREFIX+"-arrow",clickClass:i.PREFIX+"-a-clicked",closeClass:i.PREFIX+"-close",menuClass:i.PREFIX+"-js-enabled"},d.external={animIn:{opacity:"show"},animOut:{opacity:"hide"},arrow:'<span class="'+d.internal.arrowClass+'">&#187;</span>',close:'<span class="'+d.internal.closeClass+'">(X)</span>',delayIn:400,delayOut:700,easeIn:"swing",easeOut:"swing",eventOutside:!0,eventType:"hover",openClass:i.PREFIX+"-open",speedIn:"normal",speedOut:"normal",onInit:e.noop,onAfterInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onStartOutside:e.noop,onEndOutside:e.noop},e.fn[i.NS].defaults=d.external})(jQuery,window,document);