/*! jQuery MegaWhale v1.0.0 | Apache License, Version 2.0 | https://github.com/registerguard/jquery-megawhale */(function(e,n,o){var t="ontouchstart"in n||n.DocumentTouch&&o instanceof DocumentTouch,s=n.console||{log:function(){},warn:function(){}},i={NS:"megawhale",PREFIX:"mw",TOUCH:t,TYPE:t?"touchstart":"click"},a={init:function(o){return this.each(function(){var t=e(this),d=t.data(i.NS),u=e.extend({},p.external,e.fn[i.NS].defaults,o);if(!d){var h=t.children("li").children("div"),f=h.parent("li"),v=f.children("a");t.data(i.NS,{divs:h,hrefs:v,init:!1,lis:f,options:u,outside:!1,target:t}),d=t.data(i.NS)}return d.init?(s.warn(i.NS,"already initialized on",this),this):(d.init=!0,d.options.onInit.call(d.target),d.divs.length!==d.hrefs.length?(s.warn("there was a problem with your markup"),this):(d.target.addClass(p.internal.menuClass),d.divs.hide(),d.options.eventType=/^(?:click|hover|hoverIntent)$/.test(d.options.eventType)?d.options.eventType:"hover",d.options.arrow&&d.hrefs.addClass(p.internal.anchorClass).append(d.options.arrow),("click"===d.options.eventType||i.TOUCH)&&d.options.close&&e(d.options.close).appendTo(d.divs).on(i.TYPE+"."+i.NS,function(n){var o=e(this).parent("div").parent("li");a.close.call(o),n.preventDefault(),n.stopPropagation()}),d.hrefs.on("mousedown."+i.NS+" mouseup."+i.NS+" focus."+i.NS,function(n){var o=e(this),t=o.parent("li");switch(n.type){case"mousedown":t.data(i.NS+".mousedown",!0);break;case"mouseup":t.removeData(i.NS+".mousedown");break;case"focus":t.data(i.NS+".mousedown")||(i.TOUCH||"click"===d.options.eventType?o.click():(d.options.eventOutside&&r(d),a.open.call(t)))}n.preventDefault(),n.stopPropagation()}),i.TOUCH||"click"===d.options.eventType?d.hrefs.on(i.TYPE+"."+i.NS,function(o){var t=e(this),s=t.parent("li");if(t.hasClass(p.internal.clickClass)){d.options.eventOutside&&l(d),a.close.call(s);var i=c.call(t);i&&(n.location=i)}else d.options.eventOutside&&r(d),d.hrefs.removeClass(p.internal.clickClass),t.addClass(p.internal.clickClass),a.open.call(s);o.preventDefault(),o.stopPropagation()}):d.lis.on("mouseenter."+i.NS+" mouseleave."+i.NS,function(n){var o=e(this);switch(n.type){case"mouseenter":d.options.eventOutside&&l(d),e.fn[i.NS].hoverEnter.call(o);break;case"mouseleave":e.fn[i.NS].hoverLeave.call(o)}}),d.options.onAfterInit.call(d.target),undefined))})},open:function(n){return n===undefined&&(n=this),n.each(function(){var n=e(this),o=n.parent().data(i.NS);if(!n.hasClass(o.options.openClass)){var t=n.children("div");n.addClass(o.options.openClass).siblings().removeClass(o.options.openClass).children("div").stop(!0).hide().css("visibility","hidden"),t.filter(":hidden").css("visibility","visible"),o.options.onBeforeShow.call(t),t.animate(o.options.animIn,o.options.speedIn,o.options.easeIn,function(){o.options.onShow.call(t)})}})},close:function(n){return n===undefined&&(n=this),n.each(function(){var n=e(this),o=n.parent().data(i.NS);if(n.hasClass(o.options.openClass)){var t=n.children("div");n.children("a").removeClass(p.internal.clickClass).blur(),o.options.onBeforeHide.call(t),t.animate(o.options.animOut,o.options.speedOut,o.options.easeOut,function(){e(this).hide().css("visibility","hidden").parent().removeClass(o.options.openClass),o.options.onHide.call(t)})}})},destroy:function(){return this.each(function(){var n=e(this),o=n.data(i.NS);o&&(o.divs.removeAttr("style"),("click"===o.options.eventType||i.TOUCH)&&o.options.close&&o.divs.find("."+p.internal.closeClass).remove(),o.hrefs.off("."+i.NS),o.options.arrow&&o.hrefs.removeClass(p.internal.anchorClass).find("."+p.internal.arrowClass).remove(),o.hrefs.removeClass(p.internal.clickClass),o.lis.removeData(i.NS+".mousedown").off("."+i.NS),o.target.removeClass(p.internal.menuClass),n.removeData(i.NS))})}},r=function(n){if(!n.outside){n.outside=!0,n.options.onStartOutside.call(n.target);var t=e(o);t.off("."+i.NS),t.on("focusin."+i.NS+" "+i.TYPE+"."+i.NS,function(o){return 0!==e(o.target).closest(n.target).length?!0:(l(n),a.close.call(n.lis),undefined)})}},l=function(n){n.outside&&(n.options.onEndOutside.call(n.target),n.outside=!1,e(o).off("."+i.NS))},c=function(){var e=this.attr("href");return e&&"#"!==e?e:!1};e.fn[i.NS]=function(n){return a[n]?a[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?(e.error("Method "+n+" does not exist on jQuery."+i.NS),undefined):a.init.apply(this,arguments)},e.fn[i.NS].hoverEnter=function(){return this.each(function(){var n=e(this),o=n.parent().data(i.NS);e.fn.doTimeout&&"hoverIntent"===o.options.eventType?n.doTimeout("hover",o.options.delayIn,function(){a.open.call(e(this))}):a.open.call(n)})},e.fn[i.NS].hoverLeave=function(){return this.each(function(){var n=e(this),o=n.parent().data(i.NS);e.fn.doTimeout&&"hoverIntent"===o.options.eventType?n.doTimeout("hover",o.options.delayOut,function(){a.close.call(e(this))}):a.close.call(n)})};var p={};p.internal={anchorClass:i.PREFIX+"-a-with-div",arrowClass:i.PREFIX+"-arrow",clickClass:i.PREFIX+"-a-clicked",closeClass:i.PREFIX+"-close",menuClass:i.PREFIX+"-js-enabled"},p.external={animIn:{opacity:"show"},animOut:{opacity:"hide"},arrow:'<span class="'+p.internal.arrowClass+'">&#187;</span>',close:'<span class="'+p.internal.closeClass+'">(X)</span>',delayIn:400,delayOut:700,easeIn:"swing",easeOut:"swing",eventOutside:!0,eventType:"hover",openClass:i.PREFIX+"-open",speedIn:"normal",speedOut:"normal",onInit:e.noop,onAfterInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onStartOutside:e.noop,onEndOutside:e.noop},e.fn[i.NS].defaults=p.external})(jQuery,window,document);