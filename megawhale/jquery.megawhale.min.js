/*! jQuery MegaWhale v1.0.0 | Apache License, Version 2.0 | https://github.com/registerguard/jquery-megawhale */(function(e,n,t){"use strict";var o=n.console||{log:function(){},warn:function(){}},s="ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch,i={},a={NS:"megawhale",PREFIX:"mw",TOUCH:s,TYPE:s?"touchstart":"click"},l={init:function(n){return this.each(function(){var t,s,l,c,p=e(this),d=p.data(a.NS);d||(t=e.extend({},i.external,e.fn[a.NS].defaults,n),s=p.children("li").children("div"),l=s.parent("li"),c=l.children("a"),p.data(a.NS,{divs:s,hrefs:c,init:!1,lis:l,options:t,outside:!1,target:p}),d=p.data(a.NS)),d.init?o.warn("jQuery."+a.NS,"thinks it's already initialized on",this):r.call(p,d)})},open:function(n){return n===undefined&&(n=this),n.each(function(){var n,t=e(this),o=t.parent().data(a.NS);t.hasClass(o.options.openClass)||(n=t.children("div"),t.addClass(o.options.openClass).siblings().removeClass(o.options.openClass).children("div").stop(!0).hide().css("visibility","hidden"),n.filter(":hidden").css("visibility","visible"),o.options.onBeforeShow.call(n),n.animate(o.options.animIn,o.options.speedIn,o.options.easeIn,function(){o.options.onShow.call(e(this))}))})},close:function(n){return n===undefined&&(n=this),n.each(function(){var n,t=e(this),o=t.parent().data(a.NS);t.hasClass(o.options.openClass)&&(n=t.children("div"),t.children("a").removeClass(i.internal.clickClass).blur(),o.options.onBeforeHide.call(n),n.animate(o.options.animOut,o.options.speedOut,o.options.easeOut,function(){var n=e(this);n.hide().css("visibility","hidden").parent().removeClass(o.options.openClass),o.options.onHide.call(n)}))})},destroy:function(){return this.each(function(){var n=e(this),t=n.data(a.NS);t&&(t.divs.removeAttr("style"),("click"===t.options.eventType||a.TOUCH)&&t.options.close&&t.divs.find("."+i.internal.closeClass).remove(),t.hrefs.off("."+a.NS),t.options.arrow&&t.hrefs.removeClass(i.internal.anchorClass).find("."+i.internal.arrowClass).remove(),t.hrefs.removeClass(i.internal.clickClass),t.lis.removeData(a.NS+".mousedown").off("."+a.NS),t.target.removeClass(i.internal.menuClass),n.removeData(a.NS))})}},r=function(t){t===undefined&&(t=this.data(a.NS)),t&&(t.init=!0,t.options.onInit.call(t.target),t.divs.length===t.hrefs.length?(t.target.addClass(i.internal.menuClass),t.divs.hide(),t.options.eventType=/^(?:click|hover|hoverIntent)$/.test(t.options.eventType)?t.options.eventType:"hover",t.options.arrow&&t.hrefs.addClass(i.internal.anchorClass).append(t.options.arrow),("click"===t.options.eventType||a.TOUCH)&&t.options.close&&e(t.options.close).appendTo(t.divs).on(a.TYPE+"."+a.NS,function(n){var t=e(this).parent("div").parent("li");l.close.call(t),n.preventDefault(),n.stopPropagation()}),t.hrefs.on("mousedown."+a.NS+" mouseup."+a.NS+" focus."+a.NS,function(n){var o=e(this),s=o.parent("li");switch(n.type){case"mousedown":s.data(a.NS+".mousedown",!0);break;case"mouseup":s.removeData(a.NS+".mousedown");break;case"focus":s.data(a.NS+".mousedown")||(a.TOUCH||"click"===t.options.eventType?o.click():(t.options.eventOutside&&c(t),l.open.call(s)))}n.preventDefault(),n.stopPropagation()}),a.TOUCH||"click"===t.options.eventType?t.hrefs.on(a.TYPE+"."+a.NS,function(o){var s,a=e(this),r=a.parent("li");a.hasClass(i.internal.clickClass)?(t.options.eventOutside&&p(t),l.close.call(r),s=d.call(a),s&&(n.location=s)):(t.options.eventOutside&&c(t),t.hrefs.removeClass(i.internal.clickClass),a.addClass(i.internal.clickClass),l.open.call(r)),o.preventDefault(),o.stopPropagation()}):t.lis.on("mouseenter."+a.NS+" mouseleave."+a.NS,function(n){var o=e(this);switch(n.type){case"mouseenter":t.options.eventOutside&&p(t),e.fn[a.NS].hoverEnter.call(o);break;case"mouseleave":e.fn[a.NS].hoverLeave.call(o)}}),t.options.onAfterInit.call(t.target)):o.warn("jQuery."+a.NS,"thinks there's a problem with your markup"))},c=function(n){var o;n.outside||(n.outside=!0,n.options.onStartOutside.call(n.target),o=e(t),o.off("."+a.NS),o.on("focusin."+a.NS+" "+a.TYPE+"."+a.NS,function(t){return 0!==e(t.target).closest(n.target).length?!0:(p(n),l.close.call(n.lis),undefined)}))},p=function(n){n.outside&&(n.options.onEndOutside.call(n.target),n.outside=!1,e(t).off("."+a.NS))},d=function(){var e=this.attr("href");return e&&"#"!==e?e:!1};e.fn[a.NS]=function(n){return l[n]?l[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?(e.error("jQuery."+a.NS+" thinks that "+n+" doesn't exist"),undefined):l.init.apply(this,arguments)},e.fn[a.NS].hoverEnter=function(){return this.each(function(){var n=e(this),t=n.parent().data(a.NS);e.fn.doTimeout&&"hoverIntent"===t.options.eventType?n.doTimeout("hover",t.options.delayIn,function(){l.open.call(e(this))}):l.open.call(n)})},e.fn[a.NS].hoverLeave=function(){return this.each(function(){var n=e(this),t=n.parent().data(a.NS);e.fn.doTimeout&&"hoverIntent"===t.options.eventType?n.doTimeout("hover",t.options.delayOut,function(){l.close.call(e(this))}):l.close.call(n)})},i.internal={anchorClass:a.PREFIX+"-a-with-div",arrowClass:a.PREFIX+"-arrow",clickClass:a.PREFIX+"-a-clicked",closeClass:a.PREFIX+"-close",menuClass:a.PREFIX+"-js-enabled"},i.external={animIn:{opacity:"show"},animOut:{opacity:"hide"},arrow:'<span class="'+i.internal.arrowClass+'">&#187;</span>',close:'<span class="'+i.internal.closeClass+'">(X)</span>',delayIn:400,delayOut:700,easeIn:"swing",easeOut:"swing",eventOutside:!0,eventType:"hover",openClass:a.PREFIX+"-open",speedIn:"normal",speedOut:"normal",onInit:e.noop,onAfterInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onStartOutside:e.noop,onEndOutside:e.noop},e.fn[a.NS].defaults=i.external})(jQuery,window,document);